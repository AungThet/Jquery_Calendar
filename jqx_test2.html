<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/font-awesome.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<script src="scripts/jquery-2.0.2.min.js"></script>
</head>
<style>

	*{
		padding: 0;
		margin: 0;
	}
	#cal_container{
		width: 96%;
		box-shadow: 1px 1px 25px 0px rgba(0,0,0,.3);
		border-radius: 3px;
		overflow: hidden;
		margin: 2%;
	}

	.cal{
		width:100%;
		position: relative;
		overflow: hidden;
	}

	.cal_header_content{
		height: 40px;
	}

	.header_content{
		cursor: pointer;
	}

	.cursor{
		cursor:pointer;
	}

	.month_width{
		width:100%;
	}

	.month_position{
		float:left;
	}

	.current_month{
	}

	.cal_header{
		width: 100%;
		height: 40px;
		background: #eee;
		font-weight: bold;
		font-family: Arial;
		line-height: 2.3em;
		border-bottom: 1px solid #ebebeb;
	}

	.cal_header_month{
		width:48%;
		text-align: right;
		padding-right: 1.5%;
		cursor: pointer;
	}

	.cal_header_year{
		width:48%;
		text-align: left;
		padding-left: 1.5%;
		cursor: pointer;
	}

	.cal_content{
		padding-left: 5px;
		padding-top: 5px;
	}

	.cal_day{
		height: 40px;
		margin-right: 5px;
	}

	.cal_days{
		width:14.2857142857142857%;
		text-align: center;		
		background: #6C9BC7;
		padding: 10px 0;
	}

	.cal_days_position{
		float: left;
	}

	.cal_date{

	}

	.cal_dates_row{
		height: 150px;
	}

	.cal_dates{
		width:13.8%;
		height: 150px;
		float: left;
		background:rgb(143, 192, 213);
		margin: .2%;
		overflow: auto;
	}

	.date_content{
		width:92%;	
		text-align: right;
		line-height: 0;
		padding:4%;
		margin-top:8px;
		font-family: Georgia;
		font-size: 1.5em;
	}

	.data_content{
		width:95%;
		overflow-y:auto;
	}

	.today{
		background-color: rgb(113, 169, 240);
	}

	.next_month_text,.prev_month_text{
		color:black;
	}

	.prev_month_container, .next_month_container{
		background: rgb(166, 194, 206);
		opacity: .5;
	}

	.prev_button{
		float: left;
	}

	.next_button{
		float:right;
	}

	.button_size{
		width:5%;
		height: 40px;
		background-color:  rgb(113, 154, 182);
		color: #fff;
		line-height: 2.3em;
		text-indent: 2%;
		text-shadow: 2px 2px #272727;
	}

	.button_size:hover{
		color:#eee;
	}

	.button_size:active{
		text-shadow:1px 1px #272727;
	}

	.header_content{
		width:90%;
		height: 40px;
		margin:0;
		float: left;
		text-align: center;
	}

	.header_content_position{
		float:left;
		margin: 0;
	}

	/* year.................. */
	.year_container{
		width:100%;
	}

	.year_row{
		width:100%;
	}

	.years{
		width:24.4%;
		height: 160px;
		background-color: rgb(143, 192, 213);;
		float: left;
		margin: .3%;
		text-align: center;
		line-height: 9em;
	}

	/* month.................. */
	.month_container{
		width:100%;
	}

	.month_row{
		width:100%;
	}

	.months{
		width:24.4%;
		height: 160px;
		background : rgb(143, 192, 213);
		float: left;
		margin: .3%;
		text-align: center;
		line-height: 9em;
	}

	.tag{
		width: 97%;
		height: 25px;
		margin: 0 auto;
		text-align: left;
		font-size: .8em;
		font-family: Times New Roman;
		text-indent: 5px;
		line-height: 1.7em;
		border-radius: 2px;
		margin-top: 5px;
	}

	.leave{
		background-color: #0A4B88;
	}

	.morining_leave{
		background-image: linear-gradient(to right,#0A4B88 50%, transparent 52%);
	}

	.evening_leave{
		background-image: linear-gradient(to right, transparent 50%, #0A4B88 52%);
	}

	.cal_dates::-webkit-scrollbar {
		width: 5px;
	}

	/* Track */
	.cal_dates::-webkit-scrollbar-track {
		-webkit-box-shadow: inset 0 0 6px rgba(2, 39, 87, 0.3);
		-webkit-border-radius: 10px;
		border-radius: 3px;
	}


/* Handle */
.cal_dates::-webkit-scrollbar-thumb {
	border-radius: 3px;
	background: rgb(255, 255, 255);
	-webkit-box-shadow: inset 0 0 6px rgba(138, 138, 138, 0.5);
}

</style>
<body>
	<div id="cal_container">
		
	</div>
</body>
<script>
	(function create_table(){
		var date = new Date();//Date.parse('12-1-2065')

		function create_header(){
			var cal_header = $("<div>", {class: "cal_header"});
			var cal_header_content = $("<div>",{class:"cal_header_content"});
			var header_content = $("<div>",{class:"header_content"});
			var cal_header_month = $("<div>",{class:"cal_header_month header_content_position"});
			var cal_header_year = $("<div>",{class:"cal_header_year header_content_position"});
			var prev_button = $("<div>",{class:" prev_button button_size fa fa-reply"});
			var next_button = $("<div>",{class:" next_button button_size fa fa-mail-forward"});
			//header...........
			header_content.append(cal_header_month,cal_header_year);
			cal_header_content.append(header_content);
			cal_header.append(prev_button,next_button,cal_header_content);

			return cal_header;
		}

		function create_calendar(){

		}

		function create_calendar_title(){
			var cal_day= $("<div>",{class:"cal_day"});
			var cal_days = $("<div>",{class:"cal_days cal_days_position"});
			$.each(new Array(7),function(){
				cal_day.append(cal_days.clone(false));
			});

			return cal_day;
		}

		function create_calendar_content(){			
			var cal_date = $("<div>",{class:'cal_date'});
			var cal_dates_row = $('<div>',{class:'cal_dates_row'});
			var cal_dates = $("<div>",{class:'cal_dates'});
			var date_content = $("<div>",{class:'date_content'});
			var pos = new Array(7);			

			cal_dates.append(date_content.clone());
			
			$.each(pos,function(){
				cal_dates_row.append(cal_dates.clone());
			});

			$.each(pos,function(index){
				if(index==6){
					return false;
				}
				else{
					cal_date.append(cal_dates_row.clone());
				}

			});

			return cal_date;
		}

		function fill_cal_title(){
			var days= ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
			$('.cal_days').each(function(index){
				$(this).text(days[index]);
			});
		}

		function initialize(){			
			var cal= $("<div>", {class: "cal"});
			var current_month= $("<div>",{class:"current_month month_width month_position"});
			var cal_content= $("<div>",{class:"cal_content"});

			//create month's div
			cal.append(current_month);

			//create calendar's tilte and content
			cal_content.append(create_calendar_title(),create_calendar_content());	

			//append calendar to calendar's div	
			current_month.append(cal_content);

			//container...............
			$('#cal_container').append(create_header(),cal);

			//fill calendar title (Sunday ,Monday, ...)
			fill_cal_title();

		}

		function create_year(){

			//get header
			var year_container = $('<div>',{class:'year_container'});
			var year_row = $('<div>',{class:'year_row'});
			var years = $('<div>',{class:'years'});

			$.each(new Array(4),function(){
				year_row.append(years.clone());
			});

			$.each(new Array(3),function(){
				year_container.append(year_row.clone());
			});

			return year_container;
		}

		initialize();
		operate_2(getDate());		
		do_click(getDate());

		function clear(){
			$('#cal_container').html('');
		}

		function year_title_content(got_year){
			if(got_year>2089){
				got_year = 2089;
			} 
			$('.years').each(function(index){
				$(this).text(got_year+index);
			});

			$('.header_content').html(got_year+" - "+(got_year+11));
			date.setYear(got_year);
		}

		function month_title_content(got_year){
			$('.months').each(function(index){
				$(this).text(GetMonthName(index+1));
			});

			$('.header_content').html(got_year);
		}

		function create_month(){
			//get header
			var month_container = $('<div>',{class:'month_container'});
			var month_row = $('<div>',{class:'month_row'});
			var months = $('<div>',{class:'months'});

			$.each(new Array(4),function(){
				month_row.append(months.clone());
			});

			$.each(new Array(3),function(){
				month_container.append(month_row.clone());
			});

			return month_container;
		}

		function month_operate(got_year){

			clear();
			
			var month_buffer = got_year;
			var header = create_header();
			var created_month = create_month();
			
			$('#cal_container').append(header,created_month);
			
			month_title_content(month_buffer);	

			$('.prev_button').click(function(){
				var month_buffer = getDate().getFullYear();//parseInt($('.header_content').text());
				month_buffer = month_buffer-1;
				if(month_buffer<1900){
					month_buffer = 1900;
				}
				month_title_content(month_buffer);
				getDate().setYear(month_buffer);
			});

			$('.next_button').click(function(){
				var month_buffer = getDate().getFullYear();//parseInt($('.header_content').text());
				month_buffer = month_buffer+1;
				if(month_buffer>2900){
					month_buffer = 2900;
				}
				month_title_content(month_buffer);
				getDate().setYear(month_buffer);
			});

			$('.header_content').click(function(){
				clear();
				var year_to_operate,month_to_operate;
				var header = create_header();
				var created_year = create_year();

				$('#cal_container').append(header,created_year);

				var got_year = getDate().getFullYear();//parseInt($(this).text());
				year_title_content(got_year);	

				$('.prev_button').click(function(){
					var got_year = getDate().getFullYear()-12;//parseInt($('.header_content').text().split(' '))-12;
					if(got_year<1900){
						got_year = 1900;
					}
					year_title_content(got_year);
					getDate().setYear(got_year);
				});

				$('.next_button').click(function(){
					var got_year = getDate().getFullYear()+12;//parseInt($('.header_content').text().split(' '))+12;
					if(got_year>2089){
						got_year = 2089;
					}
					year_title_content(got_year);
					getDate().setYear(got_year);
				});

				$('.years').click(function(){
					year_to_operate = getDate().getFullYear()+$(this).parent('.year_row').index()*4+$(this).index();//parseInt($(this).text());
					month_operate(year_to_operate);
					date.setYear(year_to_operate);
				});
			});

			$('.months').click(function(){
				console.log('months');
				var months_buffer = getDate();
				year_to_operate = months_buffer.getFullYear();//parseInt($('.header_content').text());
				month_to_operate = $(this).parent('.month_row').index()*4+$(this).index()+1;
				var m_date = new Date();
				m_date.setDate(1);
				m_date.setMonth(month_to_operate-1);
				m_date.setYear(year_to_operate);
				clear();
				initialize();
				operate_2(m_date);
				do_click(getDate());

			});
		}

		function GetMonthName(monthNumber) {
			var months = ['January', 'February', 'March', 'April', 'May', 'June',
			'July', 'August', 'September', 'October', 'November', 'December'];
			return months[monthNumber-1];
		}

		function parseMonth(month){
			return new Date(Date.parse(month +" 1, 2012")).getMonth();
		}

		function operate_2(operate_date){

			$('.cal_dates').removeClass('today prev_month_container next_month_container');
			$('.date_content').removeClass('prev_month_text next_month_text' );
			$('.cal_header_month').text(GetMonthName(operate_date.getMonth()+1));
			$('.cal_header_year').text(operate_date.getFullYear());

			operate_date.setDate(1);
			var buffer= new Date(operate_date);
			var month = buffer.getMonth();
			var year = buffer.getFullYear();
			var day = buffer.getDay();

			var prev_month = new Date(buffer);
			prev_month.setDate(0);
			var prev_month_total = prev_month.getDate();

			var next_month = new Date(buffer);
			next_month.setMonth(next_month.getMonth()+1);
			next_month.setDate(0);
			var current_month_total=next_month.getDate();

			var is_next_month =false;
			var pre_day= prev_month_total - day+1;
			var increament = 1;
			$.each($('.current_month .cal_dates_row .cal_dates'),function(index,p_value){
				if(index>=day){
					if(increament==(new Date()).getDate() && month==(new Date()).getMonth()+1 && year==(new Date()).getFullYear()){
						$(this).addClass('today');
					}
					if(is_next_month){
						$(this).find('.date_content').addClass('next_month_text').end().addClass('next_month_container');
					}
					$(this).find('.date_content').text(increament);
					increament= increament+1;
				}
				else{
					$(this).find('.date_content').text(pre_day).addClass('prev_month_text').end().addClass('prev_month_container');
					pre_day = pre_day+1;
				}

				if(increament>current_month_total){
					return (increament=1,is_next_month = true);
				}
			});

			setDate(operate_date);
		}


		function getDate(){
			return date;
		}

		function setDate(setdate){
			date = setdate;
		}

		function do_click(d_date){
			$('.prev_button').click(function(){
				var prev_buffer = new Date(getDate());
				prev_buffer.setMonth(prev_buffer.getMonth()-1);
				setDate(prev_buffer);
				operate_2(getDate());
			});

			$('.next_button').click(function(){
				var next_buffer = new Date(getDate());
				next_buffer.setMonth(next_buffer.getMonth()+1);
				setDate(next_buffer);
				operate_2(getDate());
			});

			$('.cal_header_year').click(function(){
				clear();
				var year_to_operate,month_to_operate;
				var header = create_header();
				var created_year = create_year();
				var header_buffer = new Date(d_date);
				$('#cal_container').append(header,created_year);

				var got_year = header_buffer.getFullYear();
				year_title_content(got_year);	

				$('.prev_button').click(function(){
					var got_year = parseInt($('.header_content').text().split(' '))-12;
					if(got_year<1900){
						got_year = 1900;
					}
					year_title_content(got_year);
				});

				$('.next_button').click(function(){
					var got_year = parseInt($('.header_content').text().split(' '))+12;
					if(got_year>2089){
						got_year = 2089;
					}
					year_title_content(got_year);
				});

				$('.years').click(function(){
					year_to_operate = parseInt($(this).text());
					month_operate(year_to_operate);
				});
			});
			$('.cal_header_month').click(function(){
				var got_year = getDate().getFullYear();
				month_operate(got_year);
			});
			$('.cal_dates').click(function(){
			var result = new Date(getDate());
			result.setDate($(this).parent('.cal_dates_row').index()*7+$(this).index()-getDate().getDay()+1);
			//alert(result.getDate()+" - "+(result.getMonth()+1)+" - "+result.getFullYear());
			if($(this).hasClass('prev_month_container')){
				$('.prev_button').trigger('click');
			}
			if($(this).hasClass('next_month_container')){
				$('.next_button').trigger('click');
			}
		});
		}
	})(jQuery);
</script>
</html>